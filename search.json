[
  {
    "objectID": "notebooks/2023/demographics/age.html",
    "href": "notebooks/2023/demographics/age.html",
    "title": "Age",
    "section": "",
    "text": "Data\n# Categorize based on HHTS categories\n\nage = pd.concat(\n    [\n        pd.read_parquet(SAVE_DIR / \"age.parquet\"),\n        pd.read_parquet(SAVE_DIR / \"weights.parquet\"),\n    ],\n    axis=1,\n)",
    "crumbs": [
      "2023 Onboard Survey",
      "Demographics",
      "Age"
    ]
  },
  {
    "objectID": "notebooks/2023/demographics/age.html#table",
    "href": "notebooks/2023/demographics/age.html#table",
    "title": "Age",
    "section": "Table",
    "text": "Table\n\n\nTable\nunweighted = age.groupby(\"age_category\", observed=True).size()\nunlinked = age.groupby(\"age_category\", observed=True).unlinked_weight.sum()\nlinked = age.groupby(\"age_category\", observed=True).linked_weight.sum()\ntotal_valid = age.dropna().size\ntotal = age.size\n\nsummary = pd.DataFrame(\n    {\n        (\"unweighted\", \"count\"): unweighted,\n        (\"unweighted\", \"percent\"): unweighted / unweighted.sum(),\n        (\"unlinked_weight\", \"count\"): unlinked,\n        (\"unlinked_weight\", \"percent\"): unlinked / unlinked.sum(),\n        (\"linked_weight\", \"count\"): linked,\n        (\"linked_weight\", \"percent\"): linked / linked.sum(),\n    }\n)\n\ntable = pd.concat(\n    [\n        summary,\n        pd.DataFrame(\n            [\n                {\n                    \"age_category\": \"Total valid\",\n                    (\"unweighted\", \"count\"): total_valid,\n                    (\"unweighted\", \"percent\"): total_valid / total,\n                },\n                {\"age_category\": \"Total\", (\"unweighted\", \"count\"): total},\n            ],\n            index=[\"Total valid\", \"Total\"],\n        ).set_index(\"age_category\"),\n    ]\n).to_html(\n    formatters={\n        (\"unweighted\", \"count\"): \"{:,.0f}\".format,\n        (\"unweighted\", \"percent\"): \"{:,.2%}\".format,\n        (\"unlinked_weight\", \"count\"): \"{:,.0f}\".format,\n        (\"unlinked_weight\", \"percent\"): \"{:,.2%}\".format,\n        (\"linked_weight\", \"count\"): \"{:,.0f}\".format,\n        (\"linked_weight\", \"percent\"): \"{:,.2%}\".format,\n    }\n)\n\nHTML(table)",
    "crumbs": [
      "2023 Onboard Survey",
      "Demographics",
      "Age"
    ]
  },
  {
    "objectID": "notebooks/2023/demographics/age.html#charts",
    "href": "notebooks/2023/demographics/age.html#charts",
    "title": "Age",
    "section": "Charts",
    "text": "Charts\n\n\nChart\nfigure = go.Figure()\nfigure.add_trace(\n    go.Bar(\n        x=summary.index,\n        y=summary[(\"unweighted\", \"percent\")],\n        name=\"Unweighted\",\n    )\n)\nfigure.add_trace(\n    go.Bar(\n        x=summary.index,\n        y=summary[(\"unlinked_weight\", \"percent\")],\n        name=\"Weighted (Unlinked)\",\n    )\n)\nfigure.add_trace(\n    go.Bar(\n        x=summary.index,\n        y=summary[(\"linked_weight\", \"percent\")],\n        name=\"Weighted (Linked)\",\n    )\n)\nfigure.update_layout(\n    title_text=\"Unweighted and Weighted Responses by Age\",\n    yaxis_range=[0, 1],\n    yaxis_tickformat=\",.0%\",\n    xaxis_title=\"Age\",\n    yaxis_title=\"Percent\",\n)\n\nfigure",
    "crumbs": [
      "2023 Onboard Survey",
      "Demographics",
      "Age"
    ]
  },
  {
    "objectID": "notebooks/2015/demographics/age.html",
    "href": "notebooks/2015/demographics/age.html",
    "title": "Age",
    "section": "",
    "text": "Data\n# Categorize based on HHTS categories\n\nage = pd.concat(\n    [\n        pd.read_parquet(SAVE_DIR / \"age.parquet\"),\n        pd.read_parquet(SAVE_DIR / \"weights.parquet\"),\n    ],\n    axis=1,\n)",
    "crumbs": [
      "2015 Onboard Survey",
      "Demographics",
      "Age"
    ]
  },
  {
    "objectID": "notebooks/2015/demographics/age.html#table",
    "href": "notebooks/2015/demographics/age.html#table",
    "title": "Age",
    "section": "Table",
    "text": "Table\n\n\nTable\nunweighted = age.groupby(\"age_category\", observed=True).size()\nunlinked = age.groupby(\"age_category\", observed=True).unlinked_weight.sum()\nlinked = age.groupby(\"age_category\", observed=True).linked_weight.sum()\ntotal_valid = age.dropna().size\ntotal = age.size\n\nsummary = pd.DataFrame(\n    {\n        (\"unweighted\", \"count\"): unweighted,\n        (\"unweighted\", \"percent\"): unweighted / unweighted.sum(),\n        (\"unlinked_weight\", \"count\"): unlinked,\n        (\"unlinked_weight\", \"percent\"): unlinked / unlinked.sum(),\n        (\"linked_weight\", \"count\"): linked,\n        (\"linked_weight\", \"percent\"): linked / linked.sum(),\n    }\n)\n\ntable = pd.concat(\n    [\n        summary,\n        pd.DataFrame(\n            [\n                {\n                    \"age_category\": \"Total valid\",\n                    (\"unweighted\", \"count\"): total_valid,\n                    (\"unweighted\", \"percent\"): total_valid / total,\n                },\n                {\"age_category\": \"Total\", (\"unweighted\", \"count\"): total},\n            ],\n            index=[\"Total valid\", \"Total\"],\n        ).set_index(\"age_category\"),\n    ]\n).to_html(\n    formatters={\n        (\"unweighted\", \"count\"): \"{:,.0f}\".format,\n        (\"unweighted\", \"percent\"): \"{:,.2%}\".format,\n        (\"unlinked_weight\", \"count\"): \"{:,.0f}\".format,\n        (\"unlinked_weight\", \"percent\"): \"{:,.2%}\".format,\n        (\"linked_weight\", \"count\"): \"{:,.0f}\".format,\n        (\"linked_weight\", \"percent\"): \"{:,.2%}\".format,\n    }\n)\n\nHTML(table)",
    "crumbs": [
      "2015 Onboard Survey",
      "Demographics",
      "Age"
    ]
  },
  {
    "objectID": "notebooks/2015/demographics/age.html#charts",
    "href": "notebooks/2015/demographics/age.html#charts",
    "title": "Age",
    "section": "Charts",
    "text": "Charts\n\n\nChart\nfigure = go.Figure()\nfigure.add_trace(\n    go.Bar(\n        x=summary.index,\n        y=summary[(\"unweighted\", \"percent\")],\n        name=\"Unweighted\",\n    )\n)\nfigure.add_trace(\n    go.Bar(\n        x=summary.index,\n        y=summary[(\"unlinked_weight\", \"percent\")],\n        name=\"Weighted (Unlinked)\",\n    )\n)\nfigure.add_trace(\n    go.Bar(\n        x=summary.index,\n        y=summary[(\"linked_weight\", \"percent\")],\n        name=\"Weighted (Linked)\",\n    )\n)\nfigure.update_layout(\n    title_text=\"Unweighted and Weighted Responses by Age\",\n    yaxis_range=[0, 1],\n    yaxis_tickformat=\",.0%\",\n    xaxis_title=\"Age\",\n    yaxis_title=\"Percent\",\n)\n\nfigure",
    "crumbs": [
      "2015 Onboard Survey",
      "Demographics",
      "Age"
    ]
  }
]