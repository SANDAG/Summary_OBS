[
  {
    "objectID": "notebooks/2023/demographics/age.html",
    "href": "notebooks/2023/demographics/age.html",
    "title": "Age",
    "section": "",
    "text": "Data\n# Categorize based on HHTS categories\n\nage = pd.concat(\n    [\n        pd.read_parquet(SAVE_DIR / \"age.parquet\"),\n        pd.read_parquet(SAVE_DIR / \"weights.parquet\"),\n    ],\n    axis=1,\n)",
    "crumbs": [
      "2023 Onboard Survey",
      "Demographics",
      "Age"
    ]
  },
  {
    "objectID": "notebooks/2023/demographics/age.html#table",
    "href": "notebooks/2023/demographics/age.html#table",
    "title": "Age",
    "section": "Table",
    "text": "Table\n\n\nTable\nunweighted = age.groupby(\"age_category\", observed=True).size()\nunlinked = age.groupby(\"age_category\", observed=True).unlinked_weight.sum()\nlinked = age.groupby(\"age_category\", observed=True).linked_weight.sum()\ntotal_valid = age.dropna().size\ntotal = age.size\n\nsummary = pd.DataFrame(\n    {\n        (\"unweighted\", \"count\"): unweighted,\n        (\"unweighted\", \"percent\"): unweighted / unweighted.sum(),\n        (\"unlinked_weight\", \"count\"): unlinked,\n        (\"unlinked_weight\", \"percent\"): unlinked / unlinked.sum(),\n        (\"linked_weight\", \"count\"): linked,\n        (\"linked_weight\", \"percent\"): linked / linked.sum(),\n    }\n)\n\ntable = pd.concat(\n    [\n        summary,\n        pd.DataFrame(\n            [\n                {\n                    \"age_category\": \"Total valid\",\n                    (\"unweighted\", \"count\"): total_valid,\n                    (\"unweighted\", \"percent\"): total_valid / total,\n                },\n                {\"age_category\": \"Total\", (\"unweighted\", \"count\"): total},\n            ],\n            index=[\"Total valid\", \"Total\"],\n        ).set_index(\"age_category\"),\n    ]\n).to_html(\n    formatters={\n        (\"unweighted\", \"count\"): \"{:,.0f}\".format,\n        (\"unweighted\", \"percent\"): \"{:,.2%}\".format,\n        (\"unlinked_weight\", \"count\"): \"{:,.0f}\".format,\n        (\"unlinked_weight\", \"percent\"): \"{:,.2%}\".format,\n        (\"linked_weight\", \"count\"): \"{:,.0f}\".format,\n        (\"linked_weight\", \"percent\"): \"{:,.2%}\".format,\n    }\n)\n\nHTML(table)\n\n\n\n\n\n\nunweighted\nunlinked_weight\nlinked_weight\n\n\n\ncount\npercent\ncount\npercent\ncount\npercent\n\n\nage_category\n\n\n\n\n\n\n\n\n\n\nUnder 5\n160\n0.45%\n1,142\n0.41%\n873\n0.39%\n\n\n5-15\n556\n1.58%\n4,526\n1.61%\n3,544\n1.57%\n\n\n16-17\n988\n2.80%\n7,973\n2.84%\n6,254\n2.77%\n\n\n18-24\n8,310\n23.57%\n71,323\n25.38%\n58,966\n26.16%\n\n\n25-34\n8,049\n22.83%\n63,665\n22.65%\n51,159\n22.70%\n\n\n35-44\n5,861\n16.62%\n44,947\n15.99%\n35,908\n15.93%\n\n\n45-54\n4,073\n11.55%\n31,758\n11.30%\n25,169\n11.17%\n\n\n55-64\n3,441\n9.76%\n26,552\n9.45%\n20,681\n9.17%\n\n\n65-74\n2,338\n6.63%\n17,561\n6.25%\n13,699\n6.08%\n\n\n75-84\n536\n1.52%\n3,892\n1.38%\n3,010\n1.34%\n\n\n85 or Older\n948\n2.69%\n7,680\n2.73%\n6,150\n2.73%\n\n\nTotal valid\n171,845\n97.47%\nNaN\nNaN\nNaN\nNaN\n\n\nTotal\n176,300\nNaN\nNaN\nNaN\nNaN\nNaN",
    "crumbs": [
      "2023 Onboard Survey",
      "Demographics",
      "Age"
    ]
  },
  {
    "objectID": "notebooks/2023/demographics/age.html#charts",
    "href": "notebooks/2023/demographics/age.html#charts",
    "title": "Age",
    "section": "Charts",
    "text": "Charts\n\n\nChart\nfigure = go.Figure()\nfigure.add_trace(\n    go.Bar(\n        x=summary.index,\n        y=summary[(\"unweighted\", \"percent\")],\n        name=\"Unweighted\",\n    )\n)\nfigure.add_trace(\n    go.Bar(\n        x=summary.index,\n        y=summary[(\"unlinked_weight\", \"percent\")],\n        name=\"Weighted (Unlinked)\",\n    )\n)\nfigure.add_trace(\n    go.Bar(\n        x=summary.index,\n        y=summary[(\"linked_weight\", \"percent\")],\n        name=\"Weighted (Linked)\",\n    )\n)\nfigure.update_layout(\n    title_text=\"Unweighted and Weighted Responses by Age\",\n    yaxis_range=[0, 1],\n    yaxis_tickformat=\",.0%\",\n    xaxis_title=\"Age\",\n    yaxis_title=\"Percent\",\n)\n\nfigure",
    "crumbs": [
      "2023 Onboard Survey",
      "Demographics",
      "Age"
    ]
  },
  {
    "objectID": "notebooks/2015/demographics/age.html",
    "href": "notebooks/2015/demographics/age.html",
    "title": "Age",
    "section": "",
    "text": "Data\n# Categorize based on HHTS categories\n\nage = pd.concat(\n    [\n        pd.read_parquet(SAVE_DIR / \"age.parquet\"),\n        pd.read_parquet(SAVE_DIR / \"weights.parquet\"),\n    ],\n    axis=1,\n)",
    "crumbs": [
      "2015 Onboard Survey",
      "Demographics",
      "Age"
    ]
  },
  {
    "objectID": "notebooks/2015/demographics/age.html#table",
    "href": "notebooks/2015/demographics/age.html#table",
    "title": "Age",
    "section": "Table",
    "text": "Table\n\n\nTable\nunweighted = age.groupby(\"age_category\", observed=True).size()\nunlinked = age.groupby(\"age_category\", observed=True).unlinked_weight.sum()\nlinked = age.groupby(\"age_category\", observed=True).linked_weight.sum()\ntotal_valid = age.dropna().size\ntotal = age.size\n\nsummary = pd.DataFrame(\n    {\n        (\"unweighted\", \"count\"): unweighted,\n        (\"unweighted\", \"percent\"): unweighted / unweighted.sum(),\n        (\"unlinked_weight\", \"count\"): unlinked,\n        (\"unlinked_weight\", \"percent\"): unlinked / unlinked.sum(),\n        (\"linked_weight\", \"count\"): linked,\n        (\"linked_weight\", \"percent\"): linked / linked.sum(),\n    }\n)\n\ntable = pd.concat(\n    [\n        summary,\n        pd.DataFrame(\n            [\n                {\n                    \"age_category\": \"Total valid\",\n                    (\"unweighted\", \"count\"): total_valid,\n                    (\"unweighted\", \"percent\"): total_valid / total,\n                },\n                {\"age_category\": \"Total\", (\"unweighted\", \"count\"): total},\n            ],\n            index=[\"Total valid\", \"Total\"],\n        ).set_index(\"age_category\"),\n    ]\n).to_html(\n    formatters={\n        (\"unweighted\", \"count\"): \"{:,.0f}\".format,\n        (\"unweighted\", \"percent\"): \"{:,.2%}\".format,\n        (\"unlinked_weight\", \"count\"): \"{:,.0f}\".format,\n        (\"unlinked_weight\", \"percent\"): \"{:,.2%}\".format,\n        (\"linked_weight\", \"count\"): \"{:,.0f}\".format,\n        (\"linked_weight\", \"percent\"): \"{:,.2%}\".format,\n    }\n)\n\nHTML(table)\n\n\n\n\n\n\nunweighted\nunlinked_weight\nlinked_weight\n\n\n\ncount\npercent\ncount\npercent\ncount\npercent\n\n\nage_category\n\n\n\n\n\n\n\n\n\n\nUnder 5\n162\n0.49%\n1,574\n0.48%\n1,121\n0.49%\n\n\n5-15\n565\n1.71%\n6,001\n1.81%\n4,487\n1.95%\n\n\n16-17\n1,255\n3.81%\n14,039\n4.24%\n9,930\n4.32%\n\n\n18-24\n10,489\n31.81%\n103,775\n31.34%\n71,913\n31.26%\n\n\n25-34\n8,160\n24.75%\n82,079\n24.79%\n57,897\n25.17%\n\n\n35-44\n4,555\n13.82%\n46,751\n14.12%\n32,727\n14.23%\n\n\n45-54\n3,560\n10.80%\n35,817\n10.82%\n23,816\n10.35%\n\n\n55-64\n2,732\n8.29%\n26,270\n7.93%\n17,561\n7.63%\n\n\n65-74\n1,224\n3.71%\n12,005\n3.63%\n8,611\n3.74%\n\n\n75-84\n230\n0.70%\n2,374\n0.72%\n1,691\n0.73%\n\n\n85 or Older\n39\n0.12%\n412\n0.12%\n295\n0.13%\n\n\nTotal valid\n164,855\n90.80%\nNaN\nNaN\nNaN\nNaN\n\n\nTotal\n181,550\nNaN\nNaN\nNaN\nNaN\nNaN",
    "crumbs": [
      "2015 Onboard Survey",
      "Demographics",
      "Age"
    ]
  },
  {
    "objectID": "notebooks/2015/demographics/age.html#charts",
    "href": "notebooks/2015/demographics/age.html#charts",
    "title": "Age",
    "section": "Charts",
    "text": "Charts\n\n\nChart\nfigure = go.Figure()\nfigure.add_trace(\n    go.Bar(\n        x=summary.index,\n        y=summary[(\"unweighted\", \"percent\")],\n        name=\"Unweighted\",\n    )\n)\nfigure.add_trace(\n    go.Bar(\n        x=summary.index,\n        y=summary[(\"unlinked_weight\", \"percent\")],\n        name=\"Weighted (Unlinked)\",\n    )\n)\nfigure.add_trace(\n    go.Bar(\n        x=summary.index,\n        y=summary[(\"linked_weight\", \"percent\")],\n        name=\"Weighted (Linked)\",\n    )\n)\nfigure.update_layout(\n    title_text=\"Unweighted and Weighted Responses by Age\",\n    yaxis_range=[0, 1],\n    yaxis_tickformat=\",.0%\",\n    xaxis_title=\"Age\",\n    yaxis_title=\"Percent\",\n)\n\nfigure",
    "crumbs": [
      "2015 Onboard Survey",
      "Demographics",
      "Age"
    ]
  }
]